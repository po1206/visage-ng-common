"use strict";angular.module("visageNgCommon.config",[]).constant("ENV",{development:!0,apiEndpoint:"http://localhost:3000",pdfViewerEndpoint:"http://localhost:9011/viewer.html#/"}).constant("ThirdParties",{checkout:{jsLib:"https://sandbox.checkout.com/js/v1/checkout.js",endpoint:"http://localhost:2222",apiKey:"pk_test_dd1c0c5a-2669-475a-952a-f203f08fdb73"},zappier:{updateLead:"https://zapier.com/hooks/catch/230zsq/"},intercom:{appId:"qgdnsb89"},auth0:{clientID:"bQ1LbVxzegv8oUew3SO7eHa8bemGgcu0",domain:"visage.auth0.com"}}),angular.module("visageNgCommon",["ngAnimate","ngResource","ngMaterial","ngFileUpload","visageNgCommon.config","ngWig"]).config(["ngWigToolbarProvider",function(a){a.setButtons(["formats","list1","list2","bold","italic","link"])}]).constant("endpointsApi",{jobOffers:"/job-offers",publicJobOffers:"/public-job-offers",extJobOffers:"/ext-job-offers",users:"/users",recruiters:"/recruiters",experts:"/experts",preferences:"/preferences",candidates:"/candidates",checkout:"/checkout.php",verify:"/verify.php",media:"/media",mail:"/services/mail",invitations:"/invitations",assignments:"/assignments",expertAssignments:"/expert-assignments",recruiterAssignments:"/recruiter-assignments",secretPaymentToken:"/services/secret-payment-token",extRecruiters:"/ext-recruiters",search:"/search",cvValidation:"/media/validation/cv"}).constant("localApi",{countries:"data/countries.json",jobRoles:"data/job-roles.json",industries:"data/industries.json",employmentType:"data/employment-type.json",employmentStatus:"data/employment-status.json",salaryRange:"data/salary-range.json",jobStatus:"data/job-status.json",availability:"data/availability.json",areas:"data/areas.json",candidateReviewReasons:"data/candidate-review-reasons.json"}).constant("candidateRating",{qualified:"QUALIFIED",disqualified:"DISQUALIFIED",outstanding:"OUTSTANDING",shortlisted:"SHORTLISTED"}).constant("auth0constants",{domain:"visage.auth0.com"}).constant("apiSettings",{candidatesReviewLimit:60}).run(["$templateCache",function(a){a.put("/images/icons/ic_nationality.svg",'<svg id="svg2" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" height="71.833" viewBox="0 0 71.837503 71.833122" width="71.838" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/"><g id="g10" transform="matrix(1.25 0 0 -1.25 -469.97 531.85)"><g id="g270" fill="#757575" transform="translate(425.49 380.74)"><path id="path272" d="m0 0c-2.936 0.699-6.067 1.226-9.335 1.577 0.925 4.273 1.406 8.693 1.433 13.183h13.308c-0.256-5.348-2.139-10.52-5.406-14.76m-12.594-8.915c1.086 2.617 1.981 5.311 2.689 8.046 2.807-0.291 5.507-0.714 8.063-1.268-2.968-3.109-6.679-5.442-10.752-6.778m-13.305-0.808c-1.309 2.883-2.378 5.877-3.201 8.93 5.807 0.494 11.397 0.539 16.672 0.136-0.822-3.08-1.9-6.109-3.24-9.067-3.329-0.664-6.891-0.665-10.231 0.001m-13.784 7.541c1.754 0.326 4.561 0.789 8.062 1.168 0.705-2.696 1.589-5.348 2.65-7.902-4.052 1.329-7.75 3.646-10.712 6.734m-7.289 16.942h13.309c0.027-4.57 0.52-9.039 1.465-13.328-4.626-0.512-7.977-1.151-9.358-1.438-3.271 4.242-5.159 9.414-5.416 14.766m5.411 17.26c1.399-0.291 4.832-0.946 9.575-1.455-0.97-4.441-1.525-8.905-1.651-13.312h-13.335c0.257 5.352 2.14 10.526 5.411 14.767m12.64 8.927c-0.703-1.815-1.648-4.533-2.511-7.933-3.591 0.377-6.467 0.849-8.251 1.181 2.974 3.1 6.688 5.424 10.762 6.752m13.26 0.788c0.586-1.343 1.886-4.566 3.047-9.084-5.167-0.382-10.633-0.333-16.299 0.145 1.164 4.483 2.444 7.648 3.006 8.939 3.338 0.669 6.9 0.67 10.246 0m13.816-7.582c-2.634-0.57-5.396-1.003-8.249-1.294-0.867 3.462-1.833 6.24-2.55 8.088 4.09-1.333 7.819-3.673 10.799-6.794m-29.298-16.9c0.129 4.333 0.683 8.723 1.657 13.089 3.352-0.293 6.649-0.462 9.852-0.462 2.593 0 5.119 0.115 7.589 0.307 0.952-4.289 1.494-8.626 1.622-12.934h-20.72zm19.309-15.451c-5.641 0.456-11.637 0.41-17.866-0.14-0.95 4.207-1.443 8.6-1.471 13.098h20.776c-0.027-4.419-0.508-8.765-1.439-12.958m17.24 15.451h-13.335c-0.124 4.382-0.667 8.794-1.616 13.157 3.315 0.351 6.515 0.886 9.539 1.602 3.269-4.24 5.155-9.409 5.412-14.759m-3.971 16.973-0.386 0.455h-0.006c-4.017 4.718-9.521 8.036-15.555 9.37-4.062 0.917-8.482 0.916-12.536 0.001-6.039-1.334-11.542-4.653-15.561-9.371l-0.392-0.455c-4.202-5.118-6.517-11.588-6.517-18.219s2.315-13.101 6.517-18.22l0.386-0.455h0.006c4.019-4.718 9.522-8.037 15.555-9.369 2.031-0.459 4.141-0.691 6.271-0.691 2.131 0 4.24 0.232 6.265 0.689 6.04 1.335 11.544 4.653 15.561 9.371l0.392 0.455c4.203 5.119 6.517 11.589 6.517 18.22s-2.314 13.101-6.517 18.219" fill="#757575"/></g></g></svg>')}]),angular.module("visageNgCommon").controller("CandidateReviewDialogCtrl",["$scope","$mdDialog","rating","candidateSubmission","reviewer","operations",function(a,b,c,d,e,f){a.review={rating:c,reason:null},a.operations=f,a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.updateSubmission=function(b,c,f){b?(a.pendingReview="indeterminate",d.review=d.review||{},"QUALIFIED"===b||"OUTSTANDING"===b?(d.status="Approved","OUTSTANDING"===b&&(d.review.outstanding=!0)):"DISQUALIFIED"===b?(d.status="Disqualified",f&&(d.review.description=f)):"SHORTLISTED"===b&&(d.status="Shortlisted"),c&&(d.review.reason=c),d.review.reviewedBy=e._id,d.$update({path:"job-offers",jobId:d.job}).then(a.hide)):a.cancel()}}]),angular.module("visageNgCommon").controller("PreviewCVModalCtrl",["$scope","$mdDialog","candidateSub","Util",function(a,b,c,d){a.cvUrl=d.getDownloadUrl(c.candidate.candidate.cv.identifier,c.candidate.candidate.cv.originalFilename,"CV"),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()}}]),angular.module("visageNgCommon").controller("ReviewRequirementsDialogCtrl",["$scope","$mdDialog","$timeout","Util","requirements",function(a,b,c,d,e){a.requirements=e,a.hide=function(){b.hide()},a.cancel=function(){b.cancel()}}]),angular.module("visageNgCommon").controller("SubmitCandidateDialogCtrl",["$scope","$mdDialog","$window","endpointsApi","ENV","$http","Upload","x2js","CandidateSubmission","referrer","$mdToast","StaticData","indicators","job","$timeout","Util",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(b){return a.modeProgress="query",f.get(e.apiEndpoint+d.cvValidation,{params:{jobId:n._id,cvMd5:b.md5}})}function r(a){var b=angular.lowercase(a);return function(a){var c=angular.lowercase(a);return c.indexOf(b)!==-1}}function s(){w(),a.submissionForm.$setValidity("existing",!1)}function t(){w(),a.submissionForm.$setValidity("maximumSubmissions",!1)}function u(b){a.submissionForm.$setValidity("emailValidation",!1),a.emailValidationMessage="Email validation failed: "+b.description}function v(){a.$watch("file",function(){a.uploadFile(a.file)})}function w(){a.searchTextLocation=null,a.searchTextNationality=null,a.candidateSubmission=new i,a.candidateSubmission.status="Sourced",a.candidateSubmission.candidate={candidate:{}},a.job=n,j&&(a.referrer=j,a.candidateSubmission.recruiter=j._id),m&&(a.indicators=m)}function x(b){b&&b.error?"004"===b.error.code?u(b.error):("002"===b.error.code?s():"003"===b.error.code&&t(),a.file=null,a.modeProgress="determinate"):console.error(b)}a.dropEnabled=!0,a.hide=function(){b.hide(a.modified)},a.cancel=function(){b.cancel()},a.emailChanged=function(){a.submissionForm.$setValidity("existing",!0),a.submissionForm.$setValidity("emailValidation",!0),a.emailValidationMessage=""},a.uploadFile=function(b,c){b&&(a.f=b,a.errFile=c&&c[0],b.progress=1,f.post(e.apiEndpoint+d.media+"/signing",{filename:b.name,type:b.type,mediaType:"CV"}).success(function(c){b.upload=g.upload({url:c.url,transformRequest:function(a,b){var c=b();return delete c.Authorization,delete c.authorization,a},skipAuthorization:!0,fields:c.fields,method:"POST",file:b}),b.upload.success(function(c){var d=h.xml_str2json(c);return a.uploadSucceeded({identifier:d.PostResponse.Key,originalFilename:b.name,md5:d.PostResponse.ETag}).finally(function(){a.modeProgress="determinate",a.file.progress=void 0})}).error(function(a){x(a.data)}).progress(function(a){b.progress=Math.min(100,parseInt(100*a.loaded/a.total))})}).error(function(){}))},a.uploadSucceeded=function(b){return q(b).then(function(){a.candidateSubmission.candidate.candidate.cv=b,a.submissionForm.$setValidity("existing",!0)}).catch(function(a){x(a.data)})},a.download=function(a){c.open(p.getDownloadUrl(a.identifier,a.originalFilename,"CV"),"_blank")},a.removeFileDesc=function(b){a.pendingDeletion="indeterminate",f.delete(e.apiEndpoint+d.media+"/CV/"+b.identifier).then(function(){a.candidateSubmission.candidate.candidate.cv=null}).catch(function(a){console.error(a)}).finally(function(){a.pendingDeletion=null})},a.querySearch=function(b){var c=b?a.jobLocations.filter(r(b)):[];return c},a.doneSubmitting=function(){a.checkingSubmission="indeterminate";var b="public-job-offers";j&&(b="job-offers"),a.candidateSubmission.$save({jobId:n._id,path:b}).then(function(){return a.modified=!0,!!a.referrer}).then(function(b){b?(k.show(k.simple().textContent("Candidate submitted").position("top right").hideDelay(3e3)),a.previousSubmission=angular.merge({},a.candidateSubmission),w(),a.submissionForm.$setUntouched(),a.submissionForm.$setPristine(),o(function(){document.querySelector("#candidate-submitted-success").scrollIntoView()},0)):a.hide()}).catch(function(a){x(a.data)}).finally(function(){a.checkingSubmission=null})},a.modeProgress="determinate",a.emailValidationMessage="",w(),l.init().then(function(b){a.industries=b[4].data,a.jobLocations=b[0].data.geonames.map(function(a){return a.countryName})}),v()}]),angular.module("visageNgCommon").directive("accessibleForm",function(){return{restrict:"A",link:function(a,b){b.on("submit",function(){var a=b[0].querySelector(".ng-invalid"),c=b[0].querySelector(".field-error");a?a.scrollIntoView():c&&c.scrollIntoView()})}}}),angular.module("visageNgCommon").directive("announcement",function(){return{templateUrl:"views/templates/announcement.tmpl.html",transclude:!0,replace:!0,restrict:"E",link:function(){}}}),angular.module("visageNgCommon").directive("autoFocus",["$timeout",function(a){return{restrict:"AC",link:function(b,c){a(function(){c[0].focus()},0)}}}]),angular.module("visageNgCommon").directive("candidateListAndDetails",["StaticData","Util","apiSettings",function(a,b,c){return{templateUrl:"views/templates/candidate-list-and-details.tmpl.html",restrict:"E",scope:{candidateSubmissions:"=",candidateSubmissionsCount:"=",job:"=",indicators:"=",selectedCandidateSubmission:"=",detailsClick:"&onDetailsClick",downloadUrl:"="},link:function(b){function d(){b.$watch("candidateSubmissions",function(a){a&&(Object.keys(a).indexOf("Sourced")!==-1?b.selectedStatus="Sourced":Object.keys(a).indexOf("Approved")!==-1?b.selectedStatus="Approved":Object.keys(a).indexOf("Shortlisted")!==-1?b.selectedStatus="Shortlisted":b.selectedStatus="Disqualified",b.selectedCandidateSubmission.selected=b.candidateSubmissions[b.selectedStatus][0])}),b.$watch(function(){return b.selectedCandidateSubmission.selected},function(a){a&&"Disqualified"===a.status?(f.then(function(c){b.reviewMessage=c.data.DISQUALIFY[a.review.reason]}),b.reviewDescription=a.review.description):(b.reviewMessage=null,b.reviewDescription=null)})}b.openMenu=function(a,b){e=b,a(b)},b.orderStatuses=["Sourced","Shortlisted","Approved","Disqualified"];var e,f=a.getReviewReasons();b.candidatesReviewLimit=c.candidatesReviewLimit,d()}}}]),angular.module("visageNgCommon").directive("candidateProfile",["Util","$window",function(a,b){return{templateUrl:"views/templates/candidate-profile.tmpl.html",restrict:"E",scope:{candidateSubmission:"="},link:function(c,d,e){c.$watch("candidateSubmission",function(b){if(b){var d=b.candidate;c.urlPreviewCV=a.getDownloadUrl(d.candidate.cv.identifier,d.candidate.cv.originalFilename,"CV")}}),c.downloadCV=function(){b.open(c.urlPreviewCV,"_blank")}}}}]),angular.module("visageNgCommon").directive("candidateReview",["StaticData",function(a){return{templateUrl:"views/templates/candidate-review.tmpl.html",restrict:"E",scope:{review:"=",operations:"=",doneReviewing:"&onDoneReviewing",pendingReview:"="},link:function(b){b.pendingReview="indeterminate",a.getReviewReasons().then(function(a){b.reasons=a.data}).finally(function(){b.pendingReview=null}),b.disQualifyReasonDescriptionShouldBeShown=function(a){return"UNFIT_EXP"===b.review.reason&&"UNFIT_EXP"===a||"NO_QUALIF"===b.review.reason&&"NO_QUALIF"===a},b.getReasonDescriptionPlaceHolder=function(){return"UNFIT_EXP"===b.review.reason?"What kind of experience is the candidate lacking?":"NO_QUALIF"===b.review.reason?"What kind of qualification is the candidate lacking?":null},b.changeRating=function(a){b.review={rating:a,reason:null,description:null}},b.close=function(){b.doneReviewing()}}}}]),angular.module("visageNgCommon").directive("candidatesAddFab",["$mdMedia","$mdDialog",function(a,b){return{templateUrl:"views/templates/candidates-add-fab.tmpl.html",restrict:"E",scope:{job:"=",referredBy:"=",selectedCandidateSubmission:"=",indicators:"=",doneAdding:"&onDoneAdding"},link:function(c){c.showReferCandidateDialog=function(d){var e=(a("sm")||a("xs"))&&c.customFullscreen;b.show({controller:"SubmitCandidateDialogCtrl",templateUrl:"views/submit-candidate-dialog.html",parent:angular.element(document.body),targetEvent:d,clickOutsideToClose:!1,fullscreen:e,locals:{job:c.job,indicators:c.indicators,referrer:c.referredBy}}).then(function(a){a&&c.doneAdding()}).catch(function(a){console.error("Unable to submit this candidate"),console.error(a)}),c.$watch(function(){return a("xs")||a("sm")},function(a){c.customFullscreen=a===!0})}}}}]),angular.module("visageNgCommon").directive("candidatesList",function(){return{templateUrl:"views/templates/candidates-list.tmpl.html",restrict:"E",scope:{candidatesSubmissions:"=",selectedCandidateSubmission:"="},link:function(a){a.loadSubmission=function(b){a.selectedCandidateSubmission.selected=b}}}}),angular.module("visageNgCommon").directive("candidatesReviewFab",["$mdMedia","$mdDialog","candidateRating",function(a,b,c){return{templateUrl:"views/templates/candidates-review-fab.tmpl.html",restrict:"E",scope:{operations:"=",job:"=",reviewBy:"=",selectedCandidateSubmission:"=",doneReviewing:"&onDoneReviewing"},link:function(d){function e(c,e){var f=a("sm")||a("xs");b.show({controller:"CandidateReviewDialogCtrl",templateUrl:"views/candidate-review-dialog.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0,locals:{rating:e,candidateSubmission:d.selectedCandidateSubmission.selected,reviewer:d.reviewBy,operations:d.operations},fullscreen:f}).then(function(){d.doneReviewing()}),d.$watch(function(){return a("xs")||a("sm")},function(a){d.customFullscreen=a===!0})}d.qualify=function(a){e(a,c.qualified)},d.disqualify=function(a){e(a,c.disqualified)},d.outstanding=function(a){e(a,c.outstanding)},d.shortlist=function(a){e(a,c.shortlisted)},d.viewRequirements=function(c){var e=a("sm")||a("xs");b.show({controller:"ReviewRequirementsDialogCtrl",templateUrl:"views/review-requirements-dialog.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0,locals:{requirements:d.job.requirements},fullscreen:e}),d.$watch(function(){return a("xs")||a("sm")},function(a){d.customFullscreen=a===!0})}}}}]),angular.module("visageNgCommon").directive("indicators",function(){return{templateUrl:"views/templates/indicators.tmpl.html",restrict:"E",scope:{indicators:"="}}}),angular.module("visageNgCommon").directive("jobDescriptionEditor",function(){return{templateUrl:"views/templates/job-description-editor.tmpl.html",restrict:"E",scope:{description:"=",updateDescription:"&onChange",disabled:"=ngDisabled"},link:function(a){a.$watch("description",function(b){b&&a.updateDescription()},!0)}}}),angular.module("visageNgCommon").directive("jobEditor",["StaticData","$timeout","CustomerService","$mdMedia","$location","$window",function(a,b,c,d,e,f){return{templateUrl:"views/templates/job-editor.tmpl.html",restrict:"E",scope:{terms:"@",job:"=",jobSaved:"&onJobSaved",disabled:"=ngDisabled"},link:function(c){function g(){function a(a){if(c.jobForm.$dirty){a.preventDefault();var g=e.path(),h=e.search(),i=e.hash();b(function(){f.confirm("You are about to leave this page, your unsaved modifications will be lost.")&&(e.path(g).search(h).hash(i),d())},0)}else if("Draft"===c.job.status){a.preventDefault();var g=e.path(),h=e.search(),i=e.hash();b(function(){f.confirm("You haven't approved this job yet. It will be saved as a draft until you do so.")&&(e.path(g).search(h).hash(i),d())},0)}else d()}c.currentLocation=e.url(),c.$on("$locationChangeSuccess",function(){c.currentLocation=e.url()});var d=null;d=c.$on("$locationChangeStart",a),c.$watch("job",function(a){a&&(c.existingJob=!!a._id)})}function h(a){var b=angular.lowercase(a);return function(a){var c=angular.lowercase(a);return c.indexOf(b)!==-1}}c.approveJob=function(){c.jobForm.$setSubmitted(),c.jobForm.$valid&&(c.job.status="Approved",c.saveJob())},c.saveJob=function(){c.pending="indeterminate",c.existingJob?c.job.$update().then(function(){c.jobForm.$dirty=!1,c.jobSaved()},function(a){console.error("There was an error when trying to update the job"),console.error(a)}).finally(function(){c.pending=null}):c.job.$save().then(function(){c.jobForm.$dirty=!1,c.jobSaved()},function(a){console.error("There was an error when trying to create the job"),console.error(a)}).finally(function(){c.pending=null})},c.removeJob=function(){f.confirm("Do you really want to delete this job ? (Can't be undone)")&&(c.pending="indeterminate",c.job.$delete().then(function(){e.path("/employer/jobs")},function(a){console.error("There was an error when trying to delete the job"),console.error(a)}).finally(function(){c.pending=null}))},c.back=function(){e.path("/employer/jobs")},c.querySearch=function(a){var b=a?c.jobLocations.filter(h(a)):[];return b},c.searchTextLocation=null,a.init().then(function(a){c.jobLocations=a[0].data.geonames.map(function(a){return a.countryName}),c.salaryRange=[],a[5].data.forEach(function(a){c.salaryRange=c.salaryRange.concat(a.ranges)}),c.jobStatus=a[6].data,c.jobRoles=a[1].data,c.industries=a[4].data},function(a){console.error(a)}).finally(function(){}),g(),c.screenIsSmall=d("xs")||d("sm")}}}]),angular.module("visageNgCommon").directive("jobRequirements",function(){return{templateUrl:"views/templates/job-requirements.tmpl.html",restrict:"E",scope:{requirements:"="},link:function(a){a.readonly=!0}}}),angular.module("visageNgCommon").directive("notice",function(){return{templateUrl:"views/templates/notice.tmpl.html",transclude:!0,replace:!0,restrict:"E"}}),angular.module("visageNgCommon").directive("pipelineItem",["CandidateSubmission","$window","$interval","$location",function(a,b,c,d){return{templateUrl:"views/templates/pipeline-item.tmpl.html",restrict:"E",scope:{status:"@",label:"@",downloadable:"@",jobId:"=",refreshRate:"@",viewCandidatesPath:"=",disabled:"=ngDisabled"},link:function(e,f){function g(){return a.queryByJobCount(h).$promise.then(function(a){e.count=a.count}).catch(function(a){console.error(a)})}e.viewCandidates=function(){e.disabled||d.path(e.viewCandidatesPath)},e.downloadCSV=function(c){!e.disabled&&e.downloadable&&a.generateReportSign(h).$promise.then(function(a){b.open(a.signedUrl,"_blank")}),c.stopImmediatePropagation()};var h={jobId:e.jobId};e.status&&(h.status=e.status),g();var i=c(g,e.refreshRate);e.label=e.label||e.status,f.on("$destroy",function(){angular.isDefined(i)&&(c.cancel(i),i=void 0)})}}}]),angular.module("visageNgCommon").directive("previewCv",["$timeout","$location","ENV",function(a,b,c){return{templateUrl:"views/templates/preview-cv.tmpl.html",restrict:"E",scope:{cvUrl:"="},link:function(b,d){function e(a){g.contentWindow.postMessage(JSON.stringify({urlCV:a}),c.pdfViewerEndpoint)}var f=!1,g=d.find("iframe")[0];g.onload=function(){f=!0,a(function(){iFrameResize({resizedCallback:function(){b.$apply(function(){b.pendingCV=null})}}),e(b.cvUrl)},0)},b.$watch("cvUrl",function(a){a&&e(a)}),b.pdfViewerEndpoint=c.pdfViewerEndpoint,b.pendingCV="indeterminate"}}}]),angular.module("visageNgCommon").factory("cachedResource",["$resource","$cacheFactory",function(a,b){var c=b("resourceCache"),d={response:function(a){if(c.remove(a.config.url),"POST"===a.config.method&&a.data._id&&c.remove(a.config.url+"/"+a.data._id),"PUT"===a.config.method||"DELETE"===a.config.method){var b=a.config.url.split("/").slice(0,-1).join("/")+"/";c.remove(b)}return a}};return function(b,e,f,g){return f=angular.merge({},{},f),f=angular.merge({},{get:{method:"GET",cache:c},query:{method:"GET",cache:c,isArray:!0},save:{method:"POST",interceptor:d},update:{method:"PUT",interceptor:d},remove:{method:"DELETE",interceptor:d},delete:{method:"DELETE",interceptor:d}},f),a(b,e,f,g)}}]),angular.module("visageNgCommon").factory("CandidateSubmission",["cachedResource","endpointsApi","ENV",function(a,b,c){var d=c.apiEndpoint+"/:path/:jobId"+b.candidates+"/:_id",e=a(d,{_id:"@_id"},{queryByJob:{method:"GET",params:{path:"job-offers",jobId:"@jobId"},isArray:!0},queryByJobCount:{method:"GET",url:d+"/count",params:{path:"job-offers",jobId:"@jobId"},isArray:!1},generateReportSign:{method:"GET",url:d+"/signing",params:{path:"job-offers",jobId:"@jobId"},isArray:!1}});return e}]),angular.module("visageNgCommon").factory("ErrorHandler",["$mdDialog",function(a){function b(a,b,c){a.cancel=function(){b.cancel()},a.message=c}function c(c){return a.show({controller:b,templateUrl:"views/error-dialog.html",parent:angular.element(document.body),clickOutsideToClose:!0,locals:{message:c},fullscreen:!0})}return b.$inject=["$scope","$mdDialog","message"],{objectIsOutdated:function(){return c("You tried to update an object that has been updated in the meantime, save your modifications and reload the page before trying again.")}}}]),angular.module("visageNgCommon").factory("ServerErrorInterceptor",["$q","$injector",function(a,b){function c(a){return!!a.data.error&&"VersionError"===a.data.error.name}return{responseError:function(d){if(c(d)){var e=b.get("ErrorHandler");e.objectIsOutdated()}return a.reject(d)}}}]),angular.module("visageNgCommon").factory("StaticData",["$q","$http","localApi",function(a,b,c){var d=[b.get(c.countries),b.get(c.jobRoles),b.get(c.employmentType),b.get(c.employmentStatus),b.get(c.industries),b.get(c.salaryRange),b.get(c.jobStatus),b.get(c.areas),b.get(c.availability)];return{init:function(){return a.all(d)},getReviewReasons:function(){return b.get(c.candidateReviewReasons)}}}]),angular.module("visageNgCommon").factory("Util",["ENV","endpointsApi",function(a,b){return{getDownloadUrl:function(c,d,e){return a.apiEndpoint+b.media+"/download/"+e+"/"+c+"?filename="+encodeURIComponent(d)},getRelativeDownloadUrl:function(c,d,e){return a.apiEndpoint+b.media+"/download/"+e+"/"+c+"?filename="+d},isObject:function(a){return null!==a&&("function"==typeof a||"object"==typeof a)}}}]),angular.module("visageNgCommon").run(["$templateCache",function(a){a.put("views/candidate-review-dialog.html",'<md-dialog aria-label="Candidate review" style="width: 800px" ng-cloak> <md-dialog-content class="md-padding"> <candidate-review on-done-reviewing="updateSubmission(rating, reason, description)" pending-review="pendingReview" review="review" operations="operations"></candidate-review> </md-dialog-content> </md-dialog>'),a.put("views/error-dialog.html",'<md-dialog aria-label="Error" style="width: 800px" ng-cloak> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Error</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon aria-label="Close dialog">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content class="md-padding"> <p class="md-body-1">{{message}}</p> </md-dialog-content> <md-dialog-actions layout="row"> <md-button ng-click="cancel()"> Close </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/review-requirements-dialog.html",'<md-dialog aria-label="Review requirements" style="width: 800px" ng-cloak> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Requirements</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon aria-label="Close dialog">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content class="md-padding"> <job-requirements requirements="requirements"></job-requirements> </md-dialog-content> </form> </md-dialog>'),a.put("views/submit-candidate-dialog.html",'<md-dialog aria-label="Refer candidate" style="width: 800px" ng-cloak> <form accessible-form name="submissionForm" ng-submit="submissionForm.$valid && doneSubmitting()"> <md-toolbar> <div class="md-toolbar-tools"> <h2 ng-if="referrer">Refer a candidate</h2> <h2 ng-if="!referrer">Apply to this job</h2> <span flex></span> <md-button class="md-icon-button" ng-click="hide()"> <md-icon aria-label="Close dialog">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <announcement id="candidate-submitted-success" ng-show="previousSubmission"> Your candidate {{previousSubmission.candidateEmail}} has been submitted. His profile will be reviewed and you will get paid next week if he is validated </announcement> <div ng-show="indicators.slots>0 || !referrer" layout="column"> <div layout="column" layout-align="start center" layout-align-gt-md="start start" layout-gt-md="row"> <h2 class="md-headline" flex-order="3" flex-order-gt-md="1"> {{job.title}}</h2> <span flex-gt-md flex-order-gt-md="2"></span> <div ng-if="assignment" layout="column" flex-order="1" flex-order-gt-md="3"> <div layout="row" layout-align="end end"> <span class="md-body-1"> Bounty </span> <span style="margin-left:10px" class="md-headline cv-approved">$ {{assignment.bounty}}</span> </div> <p style="text-align: right" class="md-caption">(per profile approved)</p> </div> </div> <ol ng-if="assignment"> <li class="md-body-1">Only candidates that match the requirements will be approved.</li> <li class="md-body-1">Submitting a wrong email address on purpose will result in a permanent ban. </li> </ol> <div ng-hide="candidateSubmission.candidate.candidate.cv" flex> <p class="md-subhead">Upload CV</p> <md-progress-linear ng-show="file.progress!==undefined" md-mode="{{modeProgress}}" value="{{file.progress}}"></md-progress-linear> <div ng-message="existing" ng-show="submissionForm.$error.existing" class="field-error"> This candidate has already been submitted for this vacancy </div> <div ng-message="maximumSubmissions" ng-show="submissionForm.$error.maximumSubmissions" class="field-error">Maximum submissions number reached for this vacancy </div> <div ng-disabled="file.progress" ngf-drop ngf-select ng-model="file" class="upload-zone" layout-fill="" ngf-drag-over-class="\'dragover\'" ngf-multiple="false" ngf-allow-dir="false" accept=".pdf" ngf-pattern="\'.pdf\'" ngf-max-files="1" ngf-max-size="10MB" ng-required="true"> <div layout="column" layout-align-gt-sm="center center"> <p class="md-body-1">Drop your file here</p> <p class="md-body-1">OR</p> <md-button class="md-raised md-primary">upload</md-button> </div> </div> <div ngf-no-file-drop>File Drag/Drop is not supported for this browser</div> <div ng-show="submissionForm.$submitted"> <div ng-message="required" ng-hide="candidateSubmission.candidate.candidate.cv" class="field-error">Upload a CV before submitting the candidate </div> </div> <div layout="row"> <span class="md-caption">Max size: 10MB</span> <span flex></span> <span class="md-caption">Format: PDF</span> </div> </div> <div ng-if="candidateSubmission.candidate.candidate.cv"> <div layout="row" class="uploaded"> <span class="md-body-1 md-padding"> Uploaded : <a href="" ng-click="download(candidateSubmission.candidate.candidate.cv)"> {{candidateSubmission.candidate.candidate.cv.originalFilename}} </a></span> <span flex></span> <md-progress-circular ng-show="pendingDeletion" md-mode="indeterminate"></md-progress-circular> <md-button class="md-warn" ng-click="removeFileDesc(candidateSubmission.candidate.candidate.cv)"> Remove </md-button> </div> <div layout="row"> <md-input-container flex> <label for="email">Candidate email</label> <input ng-required="true" type="email" name="email" ng-change="emailChanged()" ng-model="candidateSubmission.candidate.candidate.email" id="email"> <div ng-show="submissionForm.$submitted || submissionForm.email.$touched"> <div ng-message="required" ng-show="submissionForm.email.$error.required">This field is mandatory </div> <div ng-message="email" ng-show="submissionForm.email.$error.email">Invalid format </div> <div ng-message="emailValidation" ng-show="submissionForm.$error.emailValidation" class="field-error">{{emailValidationMessage}} </div> </div> </md-input-container> </div> <div layout="row"> <md-input-container flex-gt-sm> <label for="name">Name</label> <input ng-model="candidateSubmission.candidate.candidate.name" id="name" name="name" ng-required="true" type="text"> <div ng-show="submissionForm.$submitted || submissionForm.name.$touched"> <div ng-message="required" ng-show="submissionForm.name.$error.required">This field is mandatory </div> </div> </md-input-container> <md-autocomplete ng-if="referrer" flex-gt-sm class="md-block" ng-required="true" md-input-name="nationality" md-selected-item="candidateSubmission.candidate.candidate.nationality" md-search-text="searchTextNationality" md-items="nationality in querySearch(searchTextNationality)" md-item-text="nationality" md-floating-label="Nationality" md-autocomplete-required> <md-item-template> <span md-highlight-text="searchTextNationality">{{nationality}}</span> </md-item-template> <md-not-found> No matching location. </md-not-found> <div ng-show="submissionForm.$submitted || submissionForm.nationality.$touched"> <div ng-message="selectedItem" ng-show="submissionForm.nationality.$error.selectedItem">Invalid nationality selected </div> <div ng-message="required" ng-show="submissionForm.nationality.$error.required"> This field is mandatory </div> </div> </md-autocomplete> </div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label for="jobTitle">Current job title</label> <input ng-required="true" ng-model="candidateSubmission.candidate.candidate.jobTitle" name="jobTitle" id="jobTitle" type="text"> <div ng-show="submissionForm.$submitted || submissionForm.jobTitle.$touched"> <div ng-message="required" ng-show="submissionForm.jobTitle.$error.required">This field is mandatory </div> </div> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label for="employer">Current employer</label> <input ng-required="true" ng-model="candidateSubmission.candidate.candidate.employer" name="employer" id="employer" type="text"> <div ng-show="submissionForm.$submitted || submissionForm.employer.$touched"> <div ng-message="required" ng-show="submissionForm.employer.$error.required">This field is mandatory </div> </div> </md-input-container> </div> <div layout="row"> <md-autocomplete class="md-block" ng-required="true" flex-gt-sm md-input-name="location" md-selected-item="candidateSubmission.candidate.candidate.location" md-search-text="searchTextLocation" md-items="location in querySearch(searchTextLocation)" md-item-text="location" md-floating-label="Country of residence" md-autocomplete-required> <md-item-template> <span md-highlight-text="searchTextLocation">{{location}}</span> </md-item-template> <md-not-found> No matching location. </md-not-found> <div ng-show="submissionForm.$submitted || submissionForm.location.$touched"> <div ng-message="selectedItem" ng-show="submissionForm.location.$error.selectedItem">Invalid location selected </div> <div ng-message="required" ng-show="submissionForm.location.$error.required">This field is mandatory </div> </div> </md-autocomplete> <md-input-container> <label for="city">City</label> <input ng-model="candidateSubmission.candidate.candidate.city" id="city" type="text"> </md-input-container> </div> </div> </div> <div ng-if="indicators.slots<=0" layout="column"> <p class="md-body-1"> <md-icon>info_outline</md-icon> You can\'t submit any more candidates for this vacancy. Wait for your CVs to be evaluated. </p> </div> </div> </md-dialog-content> <md-dialog-actions layout="row"> <md-progress-circular class="md-padding center-block" ng-show="checkingSubmission" md-mode="indeterminate"></md-progress-circular> <!--<md-button href="http://en.wikipedia.org/wiki/Mango" target="_blank" md-autofocus>--> <!--<md-icon>help</md-icon>--> <!--<span style="margin-left: 10px;">Job requirements</span>--> <!--</md-button>--> <md-button ng-click="hide()"> Close </md-button> <md-button ng-disabled="file.progress || checkingSubmission || indicators.slots<=0" class="md-primary" type="submit" style="margin-right:20px"> Submit </md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("views/templates/add-candidate-shortlist.tmpl.html",'<md-dialog aria-label="Refer candidate" style="width: 800px" ng-cloak> <form name="submissionForm" ng-submit="submissionForm.$valid && doneSubmitting()"> <md-toolbar> <div class="md-toolbar-tools"> <h2>Add to shortlist</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon aria-label="Close dialog">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div layout="column"> <div layout="row" layout-align="start start"> <h2 class="md-headline">Add a candidate to the shortlist</h2> <span flex></span> <div ng-if="pendingProfilePictureUpload || candidateSubmission.candidate.candidate.picture" style="width: 100px;height: 100px; background: url(\'{{getURLProfilePic()}}\') no-repeat center center; background-size:contain"> <md-progress-circular ng-show="pendingProfilePictureUpload" md-mode="indeterminate"></md-progress-circular> </div> </div> <div layout="row"> <md-button flex class="md-raised md-primary" type="file" ngf-select="uploadProfilePicture($file, $invalidFiles)" accept="image/*" ngf-max-height="800" ngf-max-width="800" ngf-max-size="1MB"> Upload profile picture </md-button> </div> <div layout="row"> <span class="md-caption">Max size: 1MB 600x600px</span> <span flex></span> <span class="md-caption">Format: JPG, PNG, GIF</span> </div> <div layout="row"> <md-input-container flex-gt-sm> <label for="name">Name</label> <input ng-model="candidateSubmission.candidate.candidate.name" id="name" type="text"> </md-input-container> <md-autocomplete flex-gt-sm class="md-block" md-input-name="nationality" ng-required="true" md-selected-item="candidateSubmission.candidate.candidate.nationality" md-search-text="searchTextNationality" md-items="nationality in querySearch(searchTextNationality)" md-item-text="nationality" md-floating-label="Nationality"> <md-item-template> <span md-highlight-text="searchTextLocation">{{nationality}}</span> </md-item-template> <md-not-found> No matching location. </md-not-found> <div ng-show="submissionForm.$submitted || submissionForm.nationality.$touched"> <div ng-message="selectedItem" ng-show="submissionForm.nationality.$error.selectedItem">Invalid nationality selected </div> <div ng-message="required" ng-show="submissionForm.nationality.$error.required"> This field is mandatory </div> </div> </md-autocomplete> </div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label for="jobTitle">Current job title</label> <input ng-model="candidateSubmission.candidate.candidate.jobTitle" id="jobTitle" type="text"> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Industry</label> <md-select name="industry" ng-model="candidateSubmission.candidate.candidate.industry"> <md-option ng-repeat="industry in industries" value="{{industry}}"> {{industry}} </md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-autocomplete class="md-block" flex-gt-sm md-input-name="location" ng-required="true" md-selected-item="candidateSubmission.candidate.candidate.location" md-search-text="searchTextLocation" md-items="location in querySearch(searchTextLocation)" md-item-text="location" md-floating-label="Location"> <md-item-template> <span md-highlight-text="searchTextLocation">{{location}}</span> </md-item-template> <md-not-found> No matching location. </md-not-found> <div ng-show="submissionForm.$submitted || submissionForm.location.$touched"> <div ng-message="selectedItem" ng-show="submissionForm.location.$error.selectedItem">Invalid location selected </div> <div ng-message="required" ng-show="submissionForm.location.$error.required">This field is mandatory </div> </div> </md-autocomplete> <md-input-container> <label for="city">City</label> <input ng-model="candidateSubmission.candidate.candidate.city" id="city" type="text"> </md-input-container> </div> <div layout="row"> <md-input-container flex-gt-sm> <label for="email">Email</label> <input ng-model="candidateSubmission.candidate.candidate.email" id="email" type="text"> </md-input-container> <md-input-container flex-gt-sm> <label for="video">Video CV</label> <input ng-model="candidateSubmission.candidate.candidate.video" id="video" type="text"> </md-input-container> </div> <md-input-container class="md-block"> <label>Cover letter</label> <textarea ng-model="candidateSubmission.candidate.candidate.coverLetter" rows="5" md-select-on-focus></textarea> </md-input-container> <div ngf-drop ngf-select ng-model="file" class="upload-zone" layout-fill="" ngf-drag-over-class="\'dragover\'" ngf-multiple="false" ngf-allow-dir="false" accept=".pdf" ngf-pattern="\'.pdf\'" ngf-max-files="1" ngf-max-size="10MB"> <div layout="column" layout-align-gt-sm="center center"> <p class="md-body-1">Drop the CV here</p> <p class="md-body-1">OR</p> <md-button class="md-raised md-primary">upload CV</md-button> </div> </div> <div ngf-no-file-drop>File Drag/Drop is not supported for this browser</div> <md-progress-linear ng-show="file.progress!==undefined" md-mode="determinate" value="{{file.progress}}"></md-progress-linear> <div class="uploaded" ng-show="candidateSubmission.candidate.candidate.cv" layout="row"> <p class="md-body-1"> <span>Uploaded : </span> <a href="" ng-click="download(candidateSubmission.candidate.candidate.cv, \'CV\')"><span>{{candidateSubmission.candidate.candidate.cv.originalFilename}}</span></a> </p> <span flex></span> <md-progress-circular ng-show="pendingDeletion" md-mode="indeterminate"></md-progress-circular> <md-button class="md-warn" ng-click="removeFileDesc(candidateSubmission.candidate.candidate.cv, \'CV\')">Remove </md-button> </div> <div layout="row"> <span class="md-caption">Max size: 10MB</span> <span flex></span> <span class="md-caption">Format: PDF</span> </div> </div> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex><md-progress-circular ng-show="pendingSubmission" md-mode="indeterminate"></md-progress-circular></span> <md-button ng-click="cancel()"> Cancel </md-button> <md-button class="md-primary" type="submit" style="margin-right:20px"> Add </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/templates/announcement.tmpl.html",'<md-content layout="row" layout-align="start center" class="announcement md-padding md-whiteframe-z2"> <div class="announcement-image" hide show-gt-md> <md-icon>info_outline</md-icon> </div> <div class="announcement-details" layout="column"> <ng-transclude></ng-transclude> </div> </md-content>'),a.put("views/templates/candidate-list-and-details.tmpl.html",'<div layout="column"> <div layout="row"> <div class="list-wrapper"> <div class="list-filter md-whiteframe-z2"> <md-content style="height:100%"> <md-tabs ng-if="job" md-selected="selectedTab" md-border-bottom class="tabs-candidate"> <md-tab ng-repeat="status in orderStatuses" ng-if="candidateSubmissions[status].length > 0" md-on-select="selectedStatus=status"> <md-tab-label> <span ng-if="status === \'Sourced\'"> <md-icon class="pending">hourglass_empty</md-icon> <span class="pending">({{candidateSubmissionsCount[status]}})</span> </span> <span ng-if="status === \'Approved\'"> <md-icon class="qualified">thumb_up</md-icon> <span class="qualified">({{candidateSubmissionsCount[status]}})</span> </span> <span ng-if="status === \'Disqualified\'"> <md-icon class="disqualified">thumb_down</md-icon> <span class="disqualified">({{candidateSubmissionsCount[status]}})</span> </span> <span ng-if="status === \'Shortlisted\'"> <md-icon class="qualified">people</md-icon> <span class="qualified">({{candidateSubmissionsCount[status]}})</span> </span> </md-tab-label> <md-tab-body> <notice ng-if="candidateSubmissionsCount[status] > candidatesReviewLimit"> Only displaying the first {{candidatesReviewLimit}} profiles </notice> <candidates-list candidates-submissions="candidateSubmissions[status]" selected-candidate-submission="selectedCandidateSubmission"></candidates-list> </md-tab-body> </md-tab> </md-tabs> </md-content> </div> </div> <div flex class="details-filter" layout="column"> <div layout="column" ng-if="job"> <div layout="row" layout-align="end center"> <h2 class="md-display-1" ng-if="job">{{job.title}}</h2> <span flex></span> <md-menu md-position-mode="target-right target" ng-if="detailsClick || downloadUrl"> <md-button aria-label="Details" class="md-icon-button" ng-click="openMenu($mdOpenMenu, $event)"> <md-icon md-menu-origin>more_vert</md-icon> </md-button> <md-menu-content width="4"> <md-menu-item ng-if="detailsClick"> <md-button ng-click="detailsClick()"> <md-icon md-menu-align-target>description</md-icon> Job details </md-button> </md-menu-item> <md-menu-item ng-if="downloadUrl"> <a class="md-button" ng-href="{{downloadUrl}}" target="_blank"> <md-icon md-menu-align-target>file_download</md-icon> <span> CSV Download </span> <div class="md-ripple-container"></div> </a> </md-menu-item> </md-menu-content> </md-menu> </div> <indicators ng-if="!job.pre1dot8 && indicators" indicators="indicators"></indicators> <br> <announcement ng-if="reviewMessage"> {{reviewMessage}}<span ng-if="reviewDescription">: {{reviewDescription}}</span> </announcement> </div> <div ng-if="selectedCandidateSubmission.selected"> <announcement ng-if="[\'Approved\', \'Shortlisted\'].indexOf(selectedCandidateSubmission.selected.status)!==-1"> <span ng-if="selectedCandidateSubmission.selected.status === \'Approved\'"> This candidate was selected as suitable but we don\'t have his commitment yet. <br> <span class="md-body-2">If you prefer, you can reach out to him/her at {{selectedCandidateSubmission.selected.candidate.candidate.email}}</span> </span> <span ng-if="selectedCandidateSubmission.selected.status === \'Shortlisted\'"> This candidate was selected as suitable and is interested in your job opening. <br> <span class="md-body-2">You can reach out to him/her at {{selectedCandidateSubmission.selected.candidate.candidate.email}}</span> </span> </announcement> <div class="md-whiteframe-z1"> <md-toolbar class="md-primary list-candidates-header"> <div class="md-toolbar-tools"> <h2 class="md-flex">Profile</h2> </div> </md-toolbar> <candidate-profile flex candidate-submission="selectedCandidateSubmission.selected"> </candidate-profile> </div> </div> </div> </div> </div>'),a.put("views/templates/candidate-profile.tmpl.html",'<md-content class="md-padding"> <div layout="column" layout-gt-md="row" layout-align="start start"> <div class="candidate-social-photo-container" ng-if="candidateSubmission.candidate.candidate.socialPhotoUrl" layout="column"> <img ng-src="{{candidateSubmission.candidate.candidate.socialPhotoUrl}}" height="232" width="auto"> </div> <div flex layout="column"> <h2 class="md-headline"> {{candidateSubmission.candidate.candidate.name}} <span ng-repeat="socialProfile in candidateSubmission.candidate.candidate.socialProfiles"> <span ng-switch="socialProfile.type"> <span ng-switch-when="facebook" class="social-icon"> <a ng-href="{{socialProfile.url}}" target="_blank"> <md-icon md-svg-src="/images/icons/ic_facebook_box.svg" aria-label="{{socialProfile.typeName}}"></md-icon> </a> </span> <span ng-switch-when="twitter" class="social-icon"> <a ng-href="{{socialProfile.url}}" target="_blank"> <md-icon md-svg-src="/images/icons/ic_twitter_box.svg" aria-label="{{socialProfile.typeName}}"></md-icon> </a> </span> <span ng-switch-when="linkedin" class="social-icon"> <a ng-href="{{socialProfile.url}}" target="_blank"> <md-icon md-svg-src="/images/icons/ic_linkedin_box.svg" aria-label="{{socialProfile.typeName}}"></md-icon> </a> </span> <span ng-switch-when="google" class="social-icon"> <a ng-href="{{socialProfile.url}}" target="_blank"> <md-icon md-svg-src="/images/icons/ic_google_box.svg" aria-label="{{socialProfile.typeName}}"></md-icon> </a> </span> <span ng-switch-when="github" class="social-icon"> <a ng-href="{{socialProfile.url}}" target="_blank"> <md-icon md-svg-src="/images/icons/ic_github_box.svg" aria-label="{{socialProfile.typeName}}"></md-icon> </a> </span> </span> </span> </h2> <h3 class="md-subhead">{{candidateSubmission.candidate.candidate.jobTitle}} <span ng-if="candidateSubmission.candidate.candidate.employer"> - {{candidateSubmission.candidate.candidate.employer}}</span> </h3> <div layout="column" layout-gt-md="row"> <div flex class="job-feature" layout="column" layout-align="center center"> <md-tooltip md-direction="bottom"> Nationality </md-tooltip> <md-icon md-svg-src="/images/icons/ic_nationality.svg" aria-label="android "></md-icon> <span class="md-body-1">{{candidateSubmission.candidate.candidate.nationality}}</span> </div> <div flex class="job-feature" layout="column" layout-align="center center"> <md-tooltip md-direction="bottom"> Residence </md-tooltip> <md-icon>location_on</md-icon> <span class="md-body-1"><span ng-if="candidateSubmission.candidate.candidate.city">{{candidateSubmission.candidate.candidate.city}} - </span>{{candidateSubmission.candidate.candidate.location}}</span> </div> </div> </div> </div> <div layout="row"> <h3 class="md-head">Candidate CV</h3> <span flex></span> <a ng-href="{{urlPreviewCV}}" target="_blank"> <span class="top-margin" aria-label="Download CV"> <md-tooltip md-direction="bottom"> Download CV </md-tooltip> <md-icon>file_download</md-icon> </span> </a> </div> <preview-cv ng-if="urlPreviewCV" cv-url="urlPreviewCV"></preview-cv> </md-content>'),a.put("views/templates/candidate-review.tmpl.html",'<md-content> <form name="candidateReviewForm" ng-submit="candidateReviewForm.$valid && doneReviewing({rating: review.rating, reason: review.reason, description: review.description})"> <md-tabs md-dynamic-height md-border-bottom> <md-tab ng-if="!operations || operations.disqualify" md-active="review.rating===\'DISQUALIFIED\'" md-on-select="changeRating(\'DISQUALIFIED\')"> <md-tab-label> <md-icon class="disqualified">thumb_down</md-icon> <span class="disqualified">No</span> </md-tab-label> <md-tab-body> <md-content class="md-padding"> <md-radio-group name="reasonDisqualify" ng-if="review.rating===\'DISQUALIFIED\'" ng-required="true" ng-model="review.reason" class="md-primary"> <div ng-repeat="(disQualifyReasonValue, disQualifyReasonLabel) in reasons.DISQUALIFY"> <md-radio-button ng-value="disQualifyReasonValue"> {{ disQualifyReasonLabel }} </md-radio-button> <div ng-if="disQualifyReasonDescriptionShouldBeShown(disQualifyReasonValue)"> <md-input-container class="reason-description"> <label>Description</label> <input type="text" name="reasonDescription" ng-model="review.description" placeholder="{{getReasonDescriptionPlaceHolder()}}" required md-maxlength="250"> </md-input-container> <div ng-show="candidateReviewForm.$submitted"> <div class="field-error" ng-message="required" ng-show="candidateReviewForm.reasonDescription.$error.required"> This field is mandatory </div> </div> </div> </div> </md-radio-group> <div ng-show="candidateReviewForm.$submitted"> <div class="field-error" ng-message="required" ng-show="candidateReviewForm.reasonDisqualify.$error.required"> This field is mandatory </div> </div> </md-content> </md-tab-body> </md-tab> <md-tab ng-if="!operations || operations.qualify" md-active="review.rating===\'QUALIFIED\'" md-on-select="changeRating(\'QUALIFIED\')"> <md-tab-label> <md-icon class="qualified">thumb_up</md-icon> <span class="qualified">Yes</span> </md-tab-label> <md-tab-body> <md-content class="md-padding"> </md-content> </md-tab-body> </md-tab> <md-tab ng-if="!operations || operations.outstanding" md-active="review.rating===\'OUTSTANDING\'" md-on-select="changeRating(\'OUTSTANDING\')"> <md-tab-label> <md-icon class="outstanding">whatshot</md-icon> <span class="outstanding">Definitely</span> </md-tab-label> <md-tab-body> <md-content class="md-padding"> </md-content> </md-tab-body> </md-tab> <md-tab ng-if="operations.shortlist" md-active="review.rating===\'SHORTLISTED\'" md-on-select="changeRating(\'SHORTLISTED\')"> <md-tab-label> <md-icon class="outstanding">people</md-icon> <span class="outstanding">Shortlist</span> </md-tab-label> <md-tab-body> <md-content class="md-padding"> </md-content> </md-tab-body> </md-tab> </md-tabs> <div layout="row"> <span class="md-body-2"><md-icon>warning</md-icon>You won\'t be able to change your evaluation once submitted</span> <span flex></span> <md-progress-circular class="md-padding center-block" ng-show="pendingReview" md-mode="indeterminate"></md-progress-circular> <!--<md-button href="http://en.wikipedia.org/wiki/Mango" target="_blank" md-autofocus>--> <!--<md-icon>help</md-icon>--> <!--<span style="margin-left: 10px;">Job requirements</span>--> <!--</md-button>--> <md-button ng-disabled="pendingReview" ng-click="close()"> Close </md-button> <md-button ng-disabled="pendingReview" class="md-primary" type="submit" style="margin-right:20px"> Submit </md-button> </div> </form> </md-content>'),a.put("views/templates/candidates-add-fab.tmpl.html",'<md-button class="md-fab" ng-click="showReferCandidateDialog()" id="refer-candidate-button" aria-label="Add a job offer"> <md-icon>group_add</md-icon> </md-button>'),a.put("views/templates/candidates-list.tmpl.html",'<md-list class="scroll-container"> <md-list-item class="md-3-line" ng-repeat="candidateSubmission in candidatesSubmissions track by candidateSubmission._id" ng-click="loadSubmission(candidateSubmission)" ng-class="{ \'nav-active\': candidateSubmission === selectedCandidateSubmission.selected }"> <div class="md-list-item-text" style="min-width:0" layout="row"> <div flex layout="column"> <h3> {{candidateSubmission.candidate.candidate.name}} </h3> <h4>{{candidateSubmission.candidate.candidate.jobTitle}} <span ng-if="candidateSubmission.candidate.candidate.employer"> - {{candidateSubmission.candidate.candidate.employer}}</span> </h4> <p> {{candidateSubmission.status}} on {{candidateSubmission.at | date:\'medium\' }} </p> </div> <md-icon class="md-primary md-hue-2" ng-if="candidateSubmission.status===\'Approved\'">thumb_up </md-icon> </div> </md-list-item> </md-list>'),a.put("views/templates/candidates-review-fab.tmpl.html",'<md-fab-speed-dial md-open="isOpen" md-direction="left" class="md-scale" id="rate-candidate-button"> <md-fab-trigger> <md-button aria-label="menu" class="md-fab md-accent"> <md-tooltip md-direction="bottom"> Rate candidate </md-tooltip> <md-icon>thumbs_up_down</md-icon> </md-button> </md-fab-trigger> <md-fab-actions> <md-button aria-label="Requirements" class="md-fab md-raised md-mini" ng-if="!operations || operations.viewRequirements" ng-click="viewRequirements($event)"> <md-tooltip md-direction="bottom"> View requirements </md-tooltip> <md-icon>info_outline</md-icon> </md-button> <md-button aria-label="Outstanding" class="md-fab md-accent md-mini" ng-if="!operations || operations.outstanding" ng-click="outstanding()"> <md-tooltip md-direction="bottom"> Definitely </md-tooltip> <md-icon class="">whatshot</md-icon> </md-button> <md-button aria-label="Qualify" class="md-fab md-primary md-mini" ng-if="!operations || operations.qualify" ng-click="qualify($event)"> <md-tooltip md-direction="bottom"> Yes </md-tooltip> <md-icon class="">thumb_up</md-icon> </md-button> <md-button aria-label="Disqualify" class="md-fab md-warn md-mini" ng-if="!operations || operations.disqualify" ng-click="disqualify()"> <md-tooltip md-direction="bottom"> No </md-tooltip> <md-icon class="">thumb_down</md-icon> </md-button> <md-button aria-label="Shortlist" class="md-fab md-accent md-mini" ng-if="operations.shortlist" ng-click="shortlist()"> <md-tooltip md-direction="bottom"> Shortlist </md-tooltip> <md-icon class="">people</md-icon> </md-button> </md-fab-actions> </md-fab-speed-dial>'),a.put("views/templates/indicators.tmpl.html",'<div layout="row" layout-align="center center" id="recruiter-kpis" class="md-padding"> <div flex layout="column" layout-align="center start"> <h2 class="cv-pending"> <md-icon class="md-accent">hourglass_empty</md-icon> {{indicators.pendingCVs}} </h2> </div> <div flex layout="column" layout-align="center end" ng-if="!indicators.slotsLeft && !indicators.slots"> <h2 class="cv-approved"> <md-icon class="md-primary">thumb_up</md-icon> {{indicators.approvedCVs}} </h2> </div> <div flex layout="column" layout-align="center center" ng-if="indicators.slotsLeft || indicators.slots"> <h2 class="cv-approved"> <md-icon class="md-primary">thumb_up</md-icon> {{indicators.approvedCVs}} </h2> </div> <div flex layout="column" layout-align="center end" ng-if="indicators.slotsLeft || indicators.slots"> <h2 class="cv-slots"> <md-icon class="md-primary md-hue-3">person_add</md-icon> {{indicators.slotsLeft || indicators.slots}} </h2> </div> </div>'),a.put("views/templates/job-description-editor.tmpl.html",'<md-input-container class="md-block"> <label>Job description</label> <ng-wig ng-model="description" ng-disabled="disabled"></ng-wig> </md-input-container>'),a.put("views/templates/job-editor.tmpl.html",'<md-content class="md-padding"> <form accessible-form name="jobForm" class="job-form" novalidate ng-submit="jobForm.$valid && saveJob()"> <div layout="column"> <h3 class="md-title"> Job details </h3> <md-input-container class="md-block" flex-gt-sm id="input-container-title"> <label>Job Title *</label> <input auto-focus name="uJobTitle" ng-required="true" ng-disabled="disabled" ng-model="job.title"> <div ng-show="jobForm.$submitted || jobForm.uJobTitle.$touched"> <div ng-message="required" ng-show="jobForm.uJobTitle.$error.required">This field is mandatory </div> </div> </md-input-container> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm md-is-error="jobForm.jobRole.$error.required"> <label>Job role *</label> <md-select ng-disabled="pending || disabled" name="jobRole" ng-required="true" ng-model="job.role"> <md-option ng-repeat="jobRole in jobRoles" value="{{jobRole}}"> {{jobRole}} </md-option> </md-select> <div ng-show="jobForm.$submitted || jobForm.jobRole.$touched"> <div ng-message="required" ng-show="jobForm.jobRole.$error.required">This field is mandatory </div> </div> </md-input-container> <md-input-container class="md-block" flex-gt-sm md-is-error="jobForm.jobRole.$error.required"> <label>Industry *</label> <md-select ng-disabled="pending || disabled" name="industry" ng-required="true" ng-model="job.industry"> <md-option ng-repeat="industry in industries" value="{{industry}}"> {{industry}} </md-option> </md-select> <div ng-show="jobForm.$submitted || jobForm.industry.$touched"> <div ng-message="required" ng-show="jobForm.industry.$error.required">This field is mandatory </div> </div> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm md-is-error="jobForm.jobRole.$error.required"> <label>Salary range (monthly) *</label> <md-select name="salaryRange" ng-disabled="pending || disabled" ng-required="true" ng-model="job.salaryRange"> <md-option ng-repeat="salRa in salaryRange" value="{{salRa}}"> {{salRa}} </md-option> </md-select> <div ng-show="jobForm.$submitted || jobForm.salaryRange.$touched"> <div ng-message="required" ng-show="jobForm.salaryRange.$error.required">This field is mandatory </div> </div> </md-input-container> <md-autocomplete class="md-block" flex-gt-sm md-input-name="jobLocation" ng-required="true" ng-disabled="pending || disabled" md-selected-item="job.location" md-search-text="searchTextLocation" md-items="jobLocation in querySearch(searchTextLocation)" md-item-text="jobLocation" md-floating-label="Job Location *" md-autocomplete-required> <md-item-template> <span md-highlight-text="searchTextLocation">{{jobLocation}}</span> </md-item-template> <md-not-found> No matching location. </md-not-found> <div ng-show="jobForm.$submitted || jobForm.jobLocation.$touched"> <div ng-message="selectedItem" ng-show="jobForm.jobLocation.$error.selectedItem">Invalid location selected </div> <div ng-message="required" ng-show="jobForm.jobLocation.$error.required">This field is mandatory </div> </div> </md-autocomplete> <md-input-container class="md-block" flex-gt-sm> <label>City</label> <input name="uJobCity" ng-disabled="pending || disabled" ng-model="job.city"> </md-input-container> </div> <job-description-editor ng-disabled="pending || disabled" description="job.description" name="description" ng-if="!screenIsSmall" placeholder="Description of the position" ng-required="true"> </job-description-editor> <md-input-container ng-if="screenIsSmall" class="md-block"> <label>Description of the position *</label> <textarea ng-required="true" ng-disabled="pending || disabled" ng-model="job.description" name="description" columns="1" rows="5"></textarea> </md-input-container> <div ng-show="jobForm.$submitted || jobForm.description.$touched"> <div ng-message="required" ng-show="jobForm.description.$error.required">This field is mandatory </div> </div> <h3 class="md-title"> Candidates requirements </h3> <md-input-container class="md-block"> <label>Describe the ideal candidate *</label> <textarea ng-required="true" ng-disabled="pending || disabled" ng-model="job.requirements.candidateDescription" name="candidateDescription" columns="1" rows="5"></textarea> <div ng-show="jobForm.$submitted || jobForm.candidateDescription.$touched"> <div ng-message="required" ng-show="jobForm.candidateDescription.$error.required">This field is mandatory </div> </div> </md-input-container> <!--<md-chips class="custom-chips"--> <!--ng-model="job.requirements.skills"--> <!--placeholder="Enter a skill"--> <!--delete-button-label="Remove Skill"--> <!--delete-hint="Press delete to remove skill"--> <!--secondary-placeholder="+Skill">--> <!--</md-chips>--> <md-input-container class="md-block" flex-gt-sm> <label>Which locations would you like us to source from ? *</label> <input ng-disabled="pending || disabled" ng-required="true" name="resLocation" ng-model="job.requirements.resLocation"> <div ng-show="jobForm.$submitted || jobForm.resLocation.$touched"> <div ng-message="required" ng-show="jobForm.resLocation.$error.required">This field is mandatory </div> </div> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>What job titles should candidates have from their work history ?</label> <input ng-disabled="pending || disabled" name="jobTitle" ng-model="job.requirements.jobTitle"> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>How many years of work experience should candidates have ?</label> <input ng-disabled="pending || disabled" name="yearsExp" ng-model="job.requirements.yearsExp"> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Which companies would you like the candidate to have worked for or be working for?</label> <input ng-disabled="pending || disabled" name="employer" ng-model="job.requirements.employer"> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>What level of education should candidates have ?</label> <input ng-disabled="pending || disabled" name="degree" ng-model="job.requirements.degree"> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Should candidates have any post-graduate certifications ?</label> <input ng-disabled="pending || disabled" name="degree" ng-model="job.requirements.certifications"> </md-input-container> <md-input-container class="md-block"> <label>Anything else we need to know ?</label> <textarea ng-disabled="pending || disabled" ng-model="job.requirements.miscellaneous" name="miscellaneous" columns="1" rows="5"></textarea> </md-input-container> <br> * Required fields </div> <md-input-container ng-if="terms"> <md-checkbox name="tandc" ng-disabled="pending || disabled" ng-model="job.tandc" ng-required="true" aria-label="T & C" class="md-primary md-hue-2"> <div class="md-body-1 tac">I have read and I agree to <a href="https://visage.jobs/terms-conditions.html" target="_blank"> the terms and conditions</a> </div> </md-checkbox> <div ng-messages="jobForm.tandc.$error" ng-show="jobForm.tandc.$error.required"> <div ng-message="required">You must accept the terms and conditions.</div> </div> </md-input-container> <div layout="row" layout-align="start start"> <md-progress-circular ng-show="pending" md-mode="indeterminate"></md-progress-circular> <md-button ng-disabled="pending || disabled" ng-show="existingJob" ng-click="removeJob(job)" class="md-raised md-warn md" flex-xs="100">Remove </md-button> <span flex></span> <md-button ng-disabled="pending || disabled" ng-show="!existingJob" ng-click="back()" class="md-raised md" flex-xs="100"> Cancel </md-button> <md-button ng-disabled="pending || disabled" ng-show="!existingJob" type="submit" class="md-raised md-primary md" flex-xs="100">Add </md-button> <md-button ng-disabled="pending || disabled" ng-show=" existingJob" type="submit" class="md-raised md-primary md" flex-xs="100">Save Updates </md-button> <md-button ng-disabled="pending || disabled" ng-show="existingJob && job.status ===\'Draft\'" ng-click="approveJob()" class="md-raised md-primary md-accent" flex-xs="100"> <md-icon>check</md-icon>Approve Job </md-button> </div> </form> </md-content>'),a.put("views/templates/job-requirements.tmpl.html",'<h2 class="md-title"> Candidate requirements</h2> <span class="md-subhead">The candidate will have to match the following description :</span> <p class="md-body-2">What is the ideal candidate ?</p> <p class="md-body-1">{{requirements.candidateDescription}}</p> <br> <br> <span ng-if="requirements.skills && requirements.skills.length>0"> <span class="md-body-2">Which skills should the candidate have ?</span> <br> <md-chips ng-model="requirements.skills" readonly="readonly"></md-chips> <br> <br> </span> <span ng-if="requirements.resLocation"> <span class="md-body-2">Which locations would you like us to source from ?</span> <br> <span class="md-body-1">{{requirements.resLocation}}</span> <br> <br> </span> <span ng-if="requirements.jobTitle"> <span class="md-body-2">What job titles should candidates have from their work history ?</span> <br> <span class="md-body-1">{{requirements.jobTitle}}</span> <br> <br> </span> <span ng-if="requirements.yearsExp"> <span class="md-body-2">How many years of work experience should candidates have ?</span> <br> <span class="md-body-1">{{requirements.yearsExp}}</span> <br> <br> </span> <span ng-if="requirements.employer"> <span class="md-body-2">Which companies would you like the candidate to have worked for or be working for ?</span> <br> <span class="md-body-1">{{requirements.employer}}</span> <br> <br> </span> <span ng-if="requirements.degree"> <span class="md-body-2">What level of education should candidates have ?</span> <br> <span class="md-body-1">{{requirements.degree}}</span> <br> <br> </span> <span ng-if="requirements.certifications"> <span class="md-body-2">Should candidates have any post-graduate certifications ?</span> <br> <span class="md-body-1">{{requirements.certifications}}</span> <br> <br> </span> <span ng-if="requirements.miscellaneous"> <span class="md-body-2">Anything else to know ?</span> <br> <span class="md-body-1">{{requirements.miscellaneous}}</span> <br> </span> <span ng-if="requirements.gender"> <span class="md-body-2">Gender</span> <br> <span class="md-body-1">{{requirements.gender}}</span> <br> <br> </span> <span ng-if="requirements.nationality"> <span class="md-body-2">Nationality</span> <br> <span class="md-body-1">{{requirements.nationality}}</span> <br> <br> </span> <span ng-if="requirements.language"> <span class="md-body-2">Language</span> <br> <span class="md-body-1">{{requirements.language}}</span> <br> <br> </span> <span ng-if="requirements.workExp"> <span class="md-body-2">Work Experience</span> <br> <span class="md-body-1">{{requirements.workExp}}</span> <br> <br> </span> <span ng-if="requirements.location"> <span class="md-body-2">Location</span> <br> <span class="md-body-1">{{requirements.location}}</span> <br> <br> </span> <span ng-if="requirements.major"> <span class="md-body-2">Major</span> <br> <span class="md-body-1">{{requirements.major}}</span> <br> <br> </span>'),a.put("views/templates/message-candidate.tmpl.html",'<md-dialog aria-label="Message candidate" style="width: 800px" ng-cloak> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Message {{candidateSub.candidate.name}}</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon aria-label="Close dialog">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <div layout="column"> <div layout="row" layout-align="start start"> <h2 class="md-headline">Send a message to {{candidateSub.candidate.name}}</h2> <span flex></span> <div style="width: 100px;height: 100px; background: url(\'{{getURLProfilePic()}}\') no-repeat center center; background-size:contain"> </div> </div> <md-input-container> <label for="clientEmail">Your email</label> <input ng-model="originEmail" id="clientEmail" type="text"> </md-input-container> <md-input-container class="md-block"> <label>Message to {{candidateSub.candidate.name}}</label> <textarea ng-model="messageContent" rows="5" md-select-on-focus></textarea> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex><md-progress-circular ng-show="pendingSend" md-mode="indeterminate"></md-progress-circular></span> <md-button ng-click="cancel()"> Cancel </md-button> <md-button class="md-primary" ng-click="sendMessage()" style="margin-right:20px"> Send </md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("views/templates/notice.tmpl.html",'<md-content layout="row" layout-align="center center" class="notice md-whiteframe-z1"> <div class="notice-details" layout="column"> <ng-transclude></ng-transclude> </div> </md-content>'),a.put("views/templates/pipeline-item.tmpl.html",'<div class="pipeline-item" flex layout="column" layout-align="center center" ng-click="viewCandidates()" ng-class="{ \'disabled\' : disabled}"> <span class="md-display-3">{{count}}</span> <span class="md-body-1">{{label}}</span> <md-button ng-disabled="disabled" ng-if="downloadable" class="md-primary" ng-click="downloadCSV($event)">Download</md-button> </div>'),a.put("views/templates/preview-cv-modal.tmpl.html",'<md-dialog aria-label="Preview CV" style="width: 800px" ng-cloak> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Preview CV</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon aria-label="Close dialog">close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <preview-cv cv-url="cvUrl"></preview-cv> </md-dialog-content> </form> </md-dialog> <script src="../lib/iframeResizer.contentWindow.min.js"></script>'),a.put("views/templates/preview-cv.tmpl.html",'<div layout="column"> <div ng-show="pendingCV" layout="column" layout-align="center center"> <p class="md-body-2">Loading pdf viewer...</p> <md-progress-circular ng-show="pendingCV" md-mode="indeterminate"></md-progress-circular> </div> <iframe ng-show="!pendingCV" ng-src="{{pdfViewerEndpoint}}" frameborder="0"></iframe> </div> <script src="../lib/iframeResizer.contentWindow.min.js"></script>')}]);